{% extends 'base.html' %}
{% block content %}
<form method="POST">
    {% csrf_token %}
    
    <div>
        <label for="id_username">Username:</label>
        {{ form.username }}
        {% if form.username.errors %}<div class="error">{{ form.username.errors }}</div>{% endif %}
    </div>
    <div>
        <label for="id_email">Email:</label>
        {{ form.email }}
        {% if form.email.errors %}<div class="error">{{ form.email.errors }}</div>{% endif %}
    </div>
    <div>
        <label for="id_password">Password:</label>
        {{ form.password }}
        {% if form.password.errors %}<div class="error">{{ form.password.errors }}</div>{% endif %}
    </div>
    <div>
        <label for="id_confirm_password">Confirm Password:</label>
        {{ form.confirm_password }}
        {% if form.confirm_password.errors %}<div class="error">{{ form.confirm_password.errors }}</div>{% endif %}
    </div>
    <div>
        <label for="id_first_name">First Name:</label>
        {{ form.first_name }}
        {% if form.first_name.errors %}<div class="error">{{ form.first_name.errors }}</div>{% endif %}
    </div>
    <div>
        <label for="id_last_name">Last Name:</label>
        {{ form.last_name }}
        {% if form.last_name.errors %}<div class="error">{{ form.last_name.errors }}</div>{% endif %}
    </div>
    <div>
        <label for="id_signup_option">Signup Type:</label>
        {{ form.signup_option }}
        {% if form.signup_option.errors %}<div class="error">{{ form.signup_option.errors }}</div>{% endif %}
    </div>

    <div id="agent-fields" style="display: none;">
        <div>
            <label for="id_license_number">License Number:</label>
            {{ form.license_number }}
            {% if form.license_number.errors %}<div class="error">{{ form.license_number.errors }}</div>{% endif %}
        </div>
        <div>
            <label for="id_phone">Phone:</label>
            {{ form.phone }}
            {% if form.phone.errors %}<div class="error">{{ form.phone.errors }}</div>{% endif %}
        </div>
        <div>
            <label for="id_city">City:</label>
            {{ form.city }}
            {% if form.city.errors %}<div class="error">{{ form.city.errors }}</div>{% endif %}
        </div>
    </div>
    
    <button type="submit">Sign Up</button>
</form>

    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const signupOptions = document.querySelectorAll('input[name="signup_option"]');
            const agentFields = document.getElementById('agent-fields');

            function toggleAgentFields() {
                const selectedOption = Array.from(signupOptions).find(option => option.checked);
                if (selectedOption.value === 'option2') {
                    agentFields.style.display = 'block';
                } else {
                    agentFields.style.display = 'none';
                }
            }

            signupOptions.forEach(option => {
                option.addEventListener('change', toggleAgentFields);
            });

            toggleAgentFields();
        });
    </script>
{% endblock %}
